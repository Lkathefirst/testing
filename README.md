# Telegram Relay Bot (Node.js + Telegraf)

Бот, который пускает только доверенных пользователей по секретной ссылке и пересылает их сообщения в закрытый канал.

## Логика

1. Пользователь открывает бота по ссылке вида:

   `https://t.me/<USERNAME_BOT>?start=SECRET_KEY`

2. Если `SECRET_KEY` совпадает с переменной окружения — пользователь попадает в список trusted (файл `trusted.json`).
3. Все последующие текстовые сообщения от него бот пересылает в указанный закрытый канал (`CHANNEL_ID`).
4. Пользователи не состоят в канале, только бот имеет права постить.

## Переменные окружения

- `BOT_TOKEN` — токен бота от BotFather
- `CHANNEL_ID` — ID канала в формате `-100XXXXXXXXXX`
- `SECRET_KEY` — секретный ключ, который используется в ссылке `/start`

Можно создать файл `.env` по образцу `.env.example`.

## Локальный запуск

```bash
npm install
node index.js
```

## Деплой на Render

1. Залить проект в GitHub.
2. На Render создать **Web Service**, выбрать этот репозиторий.
3. Настройки:
   - Build Command: `npm install`
   - Start Command: `node index.js` (или оставить пустым, если используется Procfile)
4. Добавить переменные окружения:
   - `BOT_TOKEN`
   - `CHANNEL_ID`
   - `SECRET_KEY`
5. Запустить Deploy.
